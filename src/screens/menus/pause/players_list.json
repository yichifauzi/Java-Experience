/* By @FMarquesPTO. All rights reserved. */
{
  "namespace": "players_list_mcjava",

  "players_list_screen_content_panel": {
    "type": "panel",
    "controls": [
      { "title@common_mcjava.title": { "text": "Players List" } },
      { "players_list_content_panel@players_list_content_panel": {} },
      {
        "menu": {
          "type": "stack_panel",
          "size": [310, 20],
          "orientation": "horizontal",
          "anchor_from": "bottom_middle",
          "anchor_to": "bottom_middle",
          "offset": [0, -8],
          "controls": [
            { "invite_players_button@pause_menu_mcjava.invite_players_button": {} },
            { "fill@common_mcjava.hfill": {} },
            { "pause_menu_button@players_list_mcjava.pause_menu_button": {} }
          ]
        }
      }
    ]
  },

  "players_list_content_panel": {
    "type": "panel",
    "anchor_from": "top_middle",
    "anchor_to": "top_middle",
    "size": [200, 120 ],
    "offset": [ 0, 32 ],
    "controls": [
      {
        "scrolling_panel@scrolling_mcjava.scrolling_panel": {
          "size": [ 200, 120 ],
          "anchor_from": "top_middle",
          "anchor_to": "top_middle",
          "$scroll_bar_offset": [ 120, 0 ],
          "$scroll_clip_path": true,
          "$scrolling_content": "players_list_mcjava.players_list_scroll_content",
          "$always_handle_scrolling": true
        }
      }
    ]
  },

  /* Content */

  "players_list_scroll_content": {
    "type": "panel",
    "size": ["100%", "100%c"],
    "controls": [
      {
        "normal_list@players_list_mcjava.players_list_content": {
          "bindings": [
            {
              "binding_name": "(not #list_has_display_objective)",
              "binding_name_override": "#visible"
            }
          ]
        }
      }
    ]
  },

  "players_list_content": {
    "type": "stack_panel",
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "size": ["100%", "100%c"],
    "focus_container": true,
    "use_last_focus": true,
    "controls": [
      { "players_grid_panel@players_list_mcjava.players_grid": {} }
    ]
  },

  "players_grid": {
    "type": "grid",
    "size": [ "100%", "default" ],
    "grid_item_template": "players_list_mcjava.player_grid_item",
    "grid_dimension_binding": "#players_grid_dimension",
    "collection_name": "players_collection",
    "anchor_to": "top_left",
    "anchor_from": "top_left",
    "bindings": [
      {
        "binding_name": "#players_grid_dimension"
      }
    ]
  },

  "player_grid_item": {
    "type": "panel",
    "size": ["100%", 10],
    "controls": [
      { "player_grid_item_content@players_list_mcjava.player_grid_item_content": {} }
    ]
  },

  "player_grid_item_content": {
    "type": "panel",
    "controls": [
      { "player_button@players_list_mcjava.player_button": {} },
      { "player_banner@players_list_mcjava.player_banner": {} },
      {
        "player_banner": {
          "type": "image",
          "texture": "src/assets/img/white",
          "alpha": 0.1,
          "color": "black",
          "size": [ "100%", "100%" ],
          "anchor_from": "top_left",
          "anchor_to": "top_left",
          "layer": 1
        }
      },
      {
        "player_banner": {
          "type": "image",
          "texture": "src/assets/img/border",
          "alpha": 0.2,
          "color": "black",
          "size": [ "100%", "100%" ],
          "anchor_from": "top_left",
          "anchor_to": "top_left",
          "layer": 1
        }
      }
    ]
  },

  "player_banner": {
    "type": "image",
    "texture": "src/assets/img/white",
    "alpha": 0.2,
    "color": "black",
    "size": [ "100%", "100%" ],
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "layer": 10,
    "controls": [
      {
        "player_grid_banner_no_focus": {
          "type": "panel",
          "controls": [
            { "player_button_content@players_list_mcjava.player_button_content": {} }
          ]
        }
      }
    ],
    "bindings": [
      {
        "binding_name": "#button_disabled",
        "binding_type": "collection",
        "binding_collection_name": "players_collection",
        "binding_name_override": "#visible"
      }
    ]
  },

  "player_button@common.button": {
    "size": [ "100%", "100%" ],
    "anchor_from": "top_left",
    "anchor_to": "top_left",
    "layer": 10,
    "controls": [
      { "@players_list_mcjava.player_button_content": {} }
    ],
    "button_mappings": [
      {
        "from_button_id": "button.menu_select",
        "to_button_id": "button.player_profile_card",
        "mapping_type": "pressed"
      },
      {
        "from_button_id": "button.menu_ok",
        "to_button_id": "button.player_profile_card",
        "mapping_type": "focused"
      }
    ],
    "bindings": [
      {
        "binding_name": "#button_enabled",
        "binding_type": "collection",
        "binding_collection_name": "players_collection",
        "binding_name_override": "#visible"
      },
      {
        "binding_type": "collection_details",
        "binding_collection_name": "players_collection"
      }
    ]
  },

  "player_button_content": {
    "type": "stack_panel",
    "orientation":  "horizontal",
    "anchor_from": "center",
    "anchor_to": "center",
    "size": [ "100% - 2px", "100% - 2px" ],
    "layer": 3,
    "controls": [
      {
        "player_pic_panel@players_list_mcjava.player_pic_panel": {
          "layer": 1
        }
      },
      { "@common_mcjava.vspace": { "size": [2, 0] }},
      {
        "player_gamertag@players_list_mcjava.gametag_wrapper": {
          "layer": 1
        }
      },
      {
        "platform_icon@pause.platform_icon_panel": {
          "layer": 1
        }
      }
    ]
  },

  "player_pic_panel": {
    "type": "panel",
    "size": [ 8, 8 ],
    "anchor_to": "left_middle",
    "anchor_from": "left_middle",
    "ignored":  "$education_edition",
    "controls": [
      { "player_gamer_pic@players_list_mcjava.player_gamer_pic": {} },
      { "player_local_icon@players_list_mcjava.player_local_icon": {} }
    ]
  },

  "player_local_icon": {
    "type": "image",
    "texture": "textures/ui/lan_icon",
    "size": [ 8, 8 ],
    "layer": 1,
    "bindings": [
      {
        "binding_name": "#local_icon_visible",
        "binding_type": "collection",
        "binding_collection_name": "players_collection",
        "binding_name_override": "#visible"
      }
    ]
  },

  "player_gamer_pic": {
    "type": "image",
    "texture": "#texture",
    "size": [ 8, 8 ],
    "layer": 1,
    "texture_file_system": "#texture_source",
    "anchor_from": "left_middle",
    "anchor_to": "left_middle",
    "bindings": [
      {
        "binding_name": "#texture",
        "binding_type": "collection",
        "binding_collection_name": "players_collection"
      },
      {
        "binding_name": "#texture_source",
        "binding_name_override": "#texture_file_system",
        "binding_type": "collection",
        "binding_collection_name": "players_collection"
      },
      {
        "binding_name": "#gamerpic_visible",
        "binding_type": "collection",
        "binding_collection_name": "players_collection",
        "binding_name_override": "#visible"
      }
    ]
  },

  "gametag_wrapper":  {
    "type": "panel",
    "size": [ "100%c", "100%" ],
    "anchor_from": "left_middle",
    "anchor_to": "left_middle",
    "controls": [
      {
        "gamertag@players_list_mcjava.player_gamertag": {}
      }
    ]
  },

  "player_gamertag": {
    "type": "label",
    "color": "$main_header_text_color",
    "text": "#gamertag",
    "size": [ "default", 10 ],
    "layer": 2,
    "bindings": [
      {
        "binding_name": "#gamertag",
        "binding_type": "collection",
        "binding_collection_name": "players_collection"
      }
    ]
  },
  
  "pause_menu_button@toggle_mcjava.toggle_button": {
    "$toggle_index": 0,
    "size": [150, 20],
    "$toggle_button_text": "gui.done",
    "$toggle_control_name": "not_players_list_view",
    "$toggle_button_name": "pause_menu",
    "$cancel_mapping": true
  }
}